!function(e){var t={};function i(l){if(t[l])return t[l].exports;var s=t[l]={i:l,l:!1,exports:{}};return e[l].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,l){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:l})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var l=ll.LClass(ll.LNode,"BaseView",{init(){},lateInit(){},getValue(e){let t=this.parent,i=this.bind.target;for(;t;){if(i){if(t._ll_className===i)return t._ll_isController?t.dispatcher[e]:t.model?t.model[e]:null}else if(t._ll_isController)return t.dispatcher[e];if("object"!=typeof(t=t.parent))break}return null},getByPath(e){if(e.indexOf(".")<0)return this.getValue(e);let t=e.split("."),i=this.getValue(t[0]);if(!i)return null;for(let e=1;e<t.length;e++){if(null===(i=i[t[e]]))break}return i}}),s=ll.LClass(l,"BaseBindView",{lateInit(){this.updateView()},updateView(e){this.model=e}});var n=new class{constructor(){}showDialog(e,t){let i=`resources/prefabs/${e}.json`;return this.loadPrefab(i).then(e=>{let t=LNode.create(e);addChild(t)})}loadPrefab(e){return new Promise(function(t,i){let l=new ll.LURLLoader;l.addEventListener(ll.LEvent.COMPLETE,e=>{let i=JSON.parse(e.target);t(i)}),l.load(e,ll.LURLLoader.TYPE_TEXT)})}},r=(ll.LClass(s,"BindListView",{init(){this.listView=new ll.LListView,this.addChild(this.listView)},updateView(){let e=this.getByPath(this.bind.key);if(null===e)return;let t=this.listView;t.maxPerLine=1,t.cellWidth=100,t.cellHeight=30,t.resize(300,300),t.arrangement=ll.LListView.Direction.Horizontal,t.movement=ll.LListView.Direction.Vertical;let i=`resources/${this.bind.childPrefab}.json`;return n.loadPrefab(i).then(t=>{for(let i of e)this.createListObject(t,i)})},createListObject(e,t){let i=new ll.LListChildView,l=LNode.create(e);console.log("BindListView createListObject,",e,t,l),l.updateWidget(t),i.addChild(l),this.listView.insertChildView(i)}}),ll.LClass(s,"BindTextView",{init(){this.label=new ll.LTextField,this.addChild(this.label)},updateView(){let e=this.getByPath(this.bind.key);null!==e&&(this.label.text=e,console.log("BindTextView",this.label.text))}}),ll.LClass(s,"BindSpriteView",{init(){},updateView(){let e=this.getByPath(this.bind.key);if(null!==e){let t=ll.LAtlas.get(this.bind.atlas);this.removeAllChild();let i=t.getSprite(e);i&&(console.log("BindSpriteView updateView",this.bind.key),this.addChild(i))}}}),ll.LClass(s,"BindListChildView",{init(){},lateInit(){},updateWidget(e){this.model=e;for(let e of this.childList)console.error("BindListChildView",e._ll_className),e.updateView()}}),ll.LClass(ll.LNode,"BaseController",{init(){this.callParent("init",arguments),this._ll_isController=!0,this.dispatcher=this.dispatcher||{},this.onLoad()},onLoad(){}}));ll.LClass(r,"LogoController",{testName:"aabbcc",onLoad(){this.graphics.drawRect(2,"#ff0000",[10,10,50,50],!0,"#ff0000"),this.dispatcher.username="测试",this.dispatcher.avatar="stone",this.dispatcher.cards=[{name:"老虎",icon:"dog"},{name:"狮子",icon:"dragon"}]}});LInit(50,"legend",800,480,function(){ll.LGlobal.debug=!0;let e=new ll.LAtlas;e.addEventListener(ll.LEvent.COMPLETE,()=>{n.showDialog("Logo")}),e.load("resources/atlas","Card")})}]);